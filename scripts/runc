#!/usr/bin/env bash
# runprob: compile and run a C file in the current directory.
# Usage: runprob problem67

set -euo pipefail

if [ $# -ne 1 ]; then
    echo "Usage: $(basename "$0") <program_name>"
    exit 1
fi

prog="$1"
src="${prog}.c"
bin_dir="bin"
bin_path="${bin_dir}/${prog}"

# Check that source file exists
if [ ! -f "$src" ]; then
    echo "Error: source file '$src' not found."
    exit 1
fi

# Ensure bin directory exists
mkdir -p "$bin_dir"

# Compile
echo "Compiling $src -> $bin_path"
if ! gcc "$src" -o "$bin_path" -lm; then
    echo "Compilation failed."
    exit 1
fi

# Run
echo "Running $bin_path"
"$bin_path"
